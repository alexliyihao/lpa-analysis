The python and shell script running [METAL](https://github.com/statgen/METAL) 11.3.25 for meta analysis

The project is running on a cluster importing METAL with Linux environment modules(module loads METAL/11.3.25), so it's a little bit inconvenient that the python instance cannot run the pipeline from start to the end.

1. METALToolkit:

    METALToolkit.py provides a METALToolkit class which takes association tables generated by SNPAssociation instance in *./pipeline/association.py* as its input , and provides the following APIs:

    - Initialize:
        ```
        from METAL import METALToolkit
        mtk = METALToolkit.METALToolkit(ethnicity = ["eu", "af", "hisp"], verbose = 1)
        ```
        - ethnicity: the name of ethnicities need to be analyzed
        - verbose: 0 or 1, if 1, API internally reading or writing files will print a hint

    - One-line preprocessing APIs:

        - mtk.path_to_metal(path)

          Prepare a METAL format folder from existing folder.This API requires that csv files in this folder should be named in "ethnicity=*.csv" format, where * is the ethnicity specified in args.

          It run *mtk.csv_to_metal* on each ethnicity=*.csv, and call
          *mtk.generate_metal_script* generating a *metal_script.txt* in the folder

    - Sub-step preprocessing APIs:

        - mtk.dataframe_to_metal(df)

          Prepare a METAL format DataFrame from existing DataFrame instance:

        - mtk.csv_to_metal(path)

          Prepare a METAL format CSV file from existing CSV file

        - mtk.generate_metal_script(path)

          Prepare a METAL script with specified ethnicity, it always returns a string, if path given, it will be saved to the path as well

    - Post-processing APIs:

        - mtk.aggregate_result(path):

          After running the METAL analysis, this API will generate an
          aggregate table for this folder for next step analysis

2. Running the METAL meta analysis:

    ```
    module loads METAL/11.3.25
    metal source ../metal_script.txt > metal.log
    ```
    the script can be generated from *mtk.generate_metal_script(path)* or an example *metal_script.txt* is provided as well. You can also use *./meta_analysis.sh* which is equivalent to call *metal_script.txt* in the same folder
    ```
    metal source metal_script.txt
    ```
    to all its sub-folders.

3. Post-processing APIs:

   *mtk.aggregate_result(path)* will generate a pd.DataFrame instance that include all the columns necessary for the next step analysis.
